{% extends 'base.html' %}
{% load static %}

{% block title %}
Exam
{% endblock title %}

{% block content %}
<div class="row my-3 justify-content-center">
    <span class="badge badge-primary my-2 px-3"><h2 id="timer">00:00:00</h2></span>    
    <input type="hidden" name="quiz_pk" value="{{ quiz_pk }}">
    {% if questions %}
        {% for question in questions %}
        <div id="exam">
            <div class="row justify-content-around">
                <div class="card border-primary col-10 col-md-8">
                    <div class="card-body">
                      <p class="card-text">{{ question.quiz.quiz_text }}</p>
                    </div>
                </div>                
                <div class="card border-primary col-10 col-md-3">            
                    <div class="card-body">
                        <p class="card-text">{{ question.question_text }}</p>
                        <form action="" method="POST">
                            {% csrf_token %}
                            <ul class="list-group list-group-flush">
                            {% for choice in question.choices.all %}
                                <li class="list-group-item">
                                    <input 
                                        type="radio" 
                                        name="choice" 
                                        id="Question{{ page_obj.number }}" 
                                        value="{{ choice.pk }}"> 
                                    <label
                                        for="Question{{ page_obj.number }}"
                                    >
                                        {{ choice }}
                                    </label>
                                </li>
                            {% endfor %}                        
                            </ul>
                        </form>
                    </div>                    
                </div>                
            </div>
        </div>
        {% endfor %}
    {% endif %}
</div>

<div class="row justify-content-center">
    <nav class="flex-grow-1" aria-label="Page navigation">
        <ul class="pagination flex-column flex-sm-row pagination-lg justify-content-around align-items-center align-items-sm-baseline">
            <!-- prev button -->
            <li class="page-item {% if not page_obj.has_previous %}disable{% endif %}">
                <a class="page-link" 
                    {% if page_obj.has_previous %} 
                        href="?page={{ page_obj.previous_page_number }}"
                        style="background-color: dodgerblue; color: #fff;"
                    {% else %}
                        style="background-color: rgb(52, 85, 107); color: #fff;"
                    {% endif %} 
                    aria-label="Previous"
                >
                    <span aria-hidden="true"> &lt;&lt; </span>
                </a>
            </li>
            <!-- finish button -->
            <li class="page-item mx-1">
                <form action="/exam/result/" method="post">
                    {% csrf_token %}
                    <input class="btn mx-1 btn-success mb-1 flex-fill" id='finish' style="padding: .75rem 1.5rem;"
                        type="submit" value="Finish" name="finish">
                    <input type="hidden" name="quiz_pk" value="{{ quiz_pk }}">
                </form>
            </li>
            <!-- next button -->
            <li class="page-item {% if not page_obj.has_next %} disabled {% endif %}">
                <a class="page-link" {% if page_obj.has_next %} href="?page={{ page_obj.next_page_number }}" {% endif %}
                    aria-label="Next"
                    style="background-color: dodgerblue; color: #fff;"    
                >
                    <span aria-hidden="true"> &gt;&gt; </span>
                </a>
            </li>
        </ul>
    </nav>
</div>
{% endblock content %}

{% block javascript %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<script src="{% static 'exam.js' %}"></script>
{% endblock javascript %}
